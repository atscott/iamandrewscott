<mat-sidenav-container>
  <mat-sidenav [mode]="sidenavMode" #sidenav>
    <mat-card-title>Recipe Finding Tools</mat-card-title>
    <div fxLayoutGap="8px" fxLayout="column">
      Sort Option:
      <mat-radio-group (change)="applyFilters()" [formControl]="sortOption">
        <mat-radio-button [value]="'missing'">By # of missing ingredients</mat-radio-button>
        <mat-radio-button [value]="'have'">By % of total ingredients</mat-radio-button>
      </mat-radio-group>
      Filter Options:
      <mat-checkbox (change)="applyFilters()" [formControl]="ignoreGarnishIngredients">Ignore garnish ingredients</mat-checkbox>
    </div>
    <h2>My Ingredients:</h2>
    <div *ngFor="let type of types" style="margin-top: 8px"> 
      <mat-expansion-panel>
        <mat-expansion-panel-header>
          {{type}}
        </mat-expansion-panel-header>
        <div fxLayout="row wrap">
          <mat-checkbox (change)="ingredientCheckChange($event, ingredient, type)"
           style="margin:4px;" *ngFor="let ingredient of ingredientsByType.get(type)" [formControl]="formControlFor(ingredient, type)">
            {{ingredient}}
          </mat-checkbox>
        </div>
      </mat-expansion-panel>
    </div>
  </mat-sidenav>
  <div class="my-content" fxLayout="row wrap" fxLayoutAlign="center start">
    <mat-card *ngFor="let info of filteredCocktails" style="margin: 16px;" fxFlex="400px" fxFlex.xs="90%">
      <mat-card-header>
        <mat-card-title> <b>{{info.recipe.name}}</b> </mat-card-title>
        <mat-card-subtitle>
          You have <b>{{info.percentIHave | percent:'1.0-1'}}</b> of the ingredients
        </mat-card-subtitle>
        <img mat-card-avatar *ngIf="info.recipe.imageUrl" [src]="info.recipe.imageUrl">
      </mat-card-header>
      <mat-card-content>
        <div *ngIf="info.have.length > 0">
          Uses your: 
          <ul>
            <li *ngFor="let have of info.have">
              {{have.name}}
            </li>
          </ul>
        </div>
        <div *ngIf="info.dontHave.length > 0">
          You're missing {{info.dontHave.length}} ingredients:
          <ul>
            <li *ngFor="let missing of info.dontHave">
              {{missing.name}}
            </li>
          </ul>
        </div>
      </mat-card-content>
      <mat-card-actions fxLayout="row" fxLayoutAlign="end">
        <button mat-button [routerLink]="['/recipe/view', info.recipe.key]">view</button>
        <button mat-button color="primary" [routerLink]="['/recipe/edit', info.recipe.key]">edit</button>
      </mat-card-actions>
    </mat-card>
  </div>
</mat-sidenav-container>
<button mat-fab (click)="toggleSidenav()" *ngIf="sidenavMode === 'over'">
  <mat-icon>filter_list</mat-icon>
</button>
